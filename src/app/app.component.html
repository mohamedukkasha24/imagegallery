<router-outlet />
<div class="p-4 max-w-6xl mx-auto">
  <div class="p-4 max-w-xl mx-auto bg-white rounded-lg shadow mb-6">
    <h3 class="text-xl font-semibold mb-4 text-center">ðŸ“¤ Upload a New Image</h3>

    <input type="file" accept="image/*" (change)="handleFileChange($event)"
      class="mb-2 block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600" />

    <input type="text" [(ngModel)]="newCaption" placeholder="Enter image caption"
      class="mb-3 w-full p-2 border border-gray-300 rounded" />

    <div *ngIf="newImagePreview" class="mb-4">
      <p class="mb-2 font-medium">Image Preview:</p>
      <img [src]="newImagePreview" alt="Preview" class="w-full max-h-64 object-contain rounded shadow" />
    </div>

    <button (click)="addImage()"
      class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded text-center"
      [disabled]="!newImagePreview || !newCaption">
      Add to Gallery
    </button>
  </div>
  <h2 class="text-2xl font-bold mb-4 text-center">ðŸ“¸ My Gallery</h2>

  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
    <div *ngFor="let image of images; let i = index"
      class="overflow-hidden rounded-lg shadow-md bg-white relative cursor-pointer" (click)="openModal(image, i)">
      <img [src]="image.url" [alt]="image.caption"
        class="w-full h-48 object-cover transform hover:scale-105 transition duration-300" />

      <div class="p-2 text-center text-sm font-medium text-gray-700">
        {{ image.caption }}
      </div>

      <!-- Delete Button -->
      <button (click)="confirmDelete(i); $event.stopPropagation()"
        class="absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1 rounded">
        âœ•
      </button>
    </div>

  </div>

  <!-- Fullscreen Image Modal -->
  <div *ngIf="selectedImage" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-90 z-50"
    (click)="closeModal()">

    <div class="relative max-w-4xl w-full p-4 flex items-center justify-center" (click)="$event.stopPropagation()">

      <!-- Close Button -->
      <button (click)="closeModal()" class="absolute top-4 right-4 text-white text-2xl hover:text-gray-300">
        âœ•
      </button>

      <!-- Prev Button -->
      <button (click)="prevImage(); $event.stopPropagation()"
        class="absolute left-4 text-white text-4xl bg-black bg-opacity-50 rounded-full px-3 py-2 hover:bg-opacity-70">
        â€¹
      </button>

      <!-- Image -->
      <img [src]="selectedImage.url" [alt]="selectedImage.caption"
        class="w-full max-h-[80vh] object-contain rounded-lg shadow-lg mx-auto" />

      <!-- Next Button -->
      <button (click)="nextImage(); $event.stopPropagation()"
        class="absolute right-4 text-white text-4xl bg-black bg-opacity-50 rounded-full px-3 py-2 hover:bg-opacity-70">
        â€º
      </button>
    </div>

    <!-- Caption -->
    <p class="absolute bottom-8 text-center w-full text-gray-200 text-lg">
      {{ selectedImage.caption }}
    </p>
  </div>






  <!-- Delete Confirm Modal -->
  <div *ngIf="showConfirmModal"
    class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 transition-opacity duration-300 ease-out"
    [ngClass]="{'opacity-0': !showConfirmModal, 'opacity-100': showConfirmModal}" (click)="cancelDelete()">
    <div
      class="bg-white rounded-xl shadow-lg p-6 w-80 text-center transform transition-all duration-300 ease-out scale-95"
      [ngClass]="{'scale-100 opacity-100': showConfirmModal, 'scale-95 opacity-0': !showConfirmModal}"
      (click)="$event.stopPropagation()">

      <h3 class="text-lg font-semibold mb-4">Delete Image?</h3>
      <p class="text-sm text-gray-600 mb-6">Are you sure you want to delete this image from your gallery?</p>

      <div class="flex justify-center gap-4">
        <button (click)="cancelDelete()"
          class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition">
          Cancel
        </button>
        <button (click)="deleteImage()" class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition">
          Delete
        </button>
      </div>
    </div>
  </div>


</div>